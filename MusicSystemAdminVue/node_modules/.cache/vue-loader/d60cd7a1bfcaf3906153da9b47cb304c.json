{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\MusicSystem\\src\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\MusicSystem\\src\\MusicSystemAdminVue\\src\\pages\\SingerPage.vue?vue&type=style&index=0&id=63cd744f&scoped=true&lang=css&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\MusicSystem\\src\\MusicSystemAdminVue\\src\\pages\\SingerPage.vue","mtime":1678901230460},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\MusicSystem\\src\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":1679068975977},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\MusicSystem\\src\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1679068979797},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\MusicSystem\\src\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":1679068977328},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\MusicSystem\\src\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679068974580},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\MusicSystem\\src\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1679068978387}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmhhbmRsZS1ib3h7CiAgICBtYXJnaW4tYm90dG9tOiAyMHB4Owp9Ci5zaW5nZXItaW1newogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDgwcHg7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9Ci5oYW5kbGUtaW5wdXR7CiAgICB3aWR0aDogMzAwcHg7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KLnBhZ2luYXRpb257CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Cn0K"},{"version":3,"sources":["SingerPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAySA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SingerPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div class=\"table\">\r\n        <div class=\"container\">\r\n            <div class=\"handle-box\">\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"delAll\">批量删除</el-button>\r\n                <el-input v-model=\"select_word\" size=\"mini\" placeholder=\"请输入歌手名\" class=\"handle-input\"></el-input>\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"centerDialogVisible = true\">添加歌手</el-button>\r\n            </div>\r\n        </div>\r\n        <el-table size=\"mini\" ref=\"multipleTable\" border style=\"width:100%\" height=\"680px\" :data=\"data\" @selection-change=\"handleSelectionChange\">\r\n            <el-table-column type=\"selection\" width=\"40\"></el-table-column>\r\n            <el-table-column label=\"歌手图片\" width=\"110\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <div class=\"singer-img\">\r\n                        <img :src=\"getUrl(scope.row.pic)\" style=\"width:100%\"/>\r\n                    </div>\r\n                    <el-upload :action=\"uploadUrl(scope.row.id)\" :before-upload=\"beforeAvatorUpload\" \r\n                        :on-success=\"handleAvatorSuccess\">\r\n                        <el-button size=\"mini\">更新图片</el-button>\r\n                    </el-upload>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\" label=\"歌手\" width=\"120\" align=\"center\"></el-table-column>\r\n            <el-table-column label=\"性别\" width=\"50\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    {{changeSex(scope.row.sex)}}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"生日\" width=\"120\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    {{attachBirth(scope.row.birth)}}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"location\" label=\"地区\" width=\"100\" align=\"center\"></el-table-column>\r\n            <el-table-column label=\"简介\">\r\n                <template slot-scope=\"scope\">\r\n                    <p style=\"height:100px;overflow:scroll\">{{scope.row.introduction}}</p>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"歌曲管理\" width=\"110\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button size=\"mini\" @click=\"songEdit(scope.row.id,scope.row.name)\">歌曲管理</el-button>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"150\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button size=\"mini\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n                    <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.row.id)\">删除</el-button> \r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <div class=\"pagination\">\r\n            <el-pagination\r\n                background\r\n                layout = \"total,prev,pager,next\"\r\n                :current-page=\"currentPage\"\r\n                :page-size=\"pageSize\"\r\n                :total=\"tableData.length\"\r\n                @current-change=\"handleCurrentChange\"\r\n                >\r\n            </el-pagination>\r\n        </div>\r\n\r\n        <el-dialog title=\"添加歌手\" :visible.sync=\"centerDialogVisible\" width=\"400px\" center>\r\n            <el-form :model=\"registerForm\" ref=\"registerForm\" label-width=\"80px\">\r\n                <el-form-item prop=\"name\" label=\"歌手名\" size=\"mini\">\r\n                    <el-input v-model=\"registerForm.name\" placeholder=\"歌手名\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"性别\" size=\"mini\">\r\n                    <el-radio-group v-model=\"registerForm.sex\">\r\n                        <el-radio :label=\"0\">女</el-radio>\r\n                        <el-radio :label=\"1\">男</el-radio>\r\n                        <el-radio :label=\"2\">组合</el-radio>\r\n                        <el-radio :label=\"3\">不明</el-radio>                        \r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item prop=\"birth\" label=\"生日\" size=\"mini\">\r\n                    <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"registerForm.birth\" style=\"width:100%\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item prop=\"location\" label=\"地区\" size=\"mini\">\r\n                    <el-input v-model=\"registerForm.location\" placeholder=\"地区\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"introduction\" label=\"简介\" size=\"mini\">\r\n                    <el-input v-model=\"registerForm.introduction\" placeholder=\"简介\" type=\"textarea\"></el-input>\r\n                </el-form-item>                \r\n            </el-form>\r\n            <span slot=\"footer\">\r\n                <el-button size=\"mini\" @click=\"centerDialogVisible = false\">取消</el-button>\r\n                <el-button size=\"mini\" @click=\"addSinger\">确定</el-button>                \r\n            </span>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"修改歌手\" :visible.sync=\"editVisible\" width=\"400px\" center>\r\n            <el-form :model=\"form\" ref=\"form\" label-width=\"80px\">\r\n                <el-form-item prop=\"name\" label=\"歌手名\" size=\"mini\">\r\n                    <el-input v-model=\"form.name\" placeholder=\"歌手名\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"性别\" size=\"mini\">\r\n                    <el-radio-group v-model=\"form.sex\">\r\n                        <el-radio :label=\"0\">女</el-radio>\r\n                        <el-radio :label=\"1\">男</el-radio>\r\n                        <el-radio :label=\"2\">组合</el-radio>\r\n                        <el-radio :label=\"3\">不明</el-radio>                        \r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"生日\" size=\"mini\">\r\n                    <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"form.birth\" style=\"width:100%\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item prop=\"location\" label=\"地区\" size=\"mini\">\r\n                    <el-input v-model=\"form.location\" placeholder=\"地区\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"introduction\" label=\"简介\" size=\"mini\">\r\n                    <el-input v-model=\"form.introduction\" placeholder=\"简介\" type=\"textarea\"></el-input>\r\n                </el-form-item>                \r\n            </el-form>\r\n            <span slot=\"footer\">\r\n                <el-button size=\"mini\" @click=\"editVisible = false\">取消</el-button>\r\n                <el-button size=\"mini\" @click=\"editSave\">确定</el-button>                \r\n            </span>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"删除歌手\" :visible.sync=\"delVisible\" width=\"300px\" center>\r\n            <div align=\"center\">删除不可恢复，是否确定删除？</div>\r\n            <span slot=\"footer\">\r\n                <el-button size=\"mini\" @click=\"delVisible = false\">取消</el-button>\r\n                <el-button size=\"mini\" @click=\"deleteRow\">确定</el-button>                \r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {setSinger, getAllSinger,updateSinger,delSinger} from '../api/index';\r\nimport { mixin } from '../mixins/index';\r\nexport default {\r\n    mixins: [mixin],\r\n    data(){\r\n        return{\r\n            centerDialogVisible: false, //添加弹窗是否显示\r\n            editVisible: false,         //编辑弹窗是否显示\r\n            delVisible: false,          //删除弹窗是否显示\r\n            registerForm:{      //添加框\r\n                name: '',\r\n                sex: '',\r\n                birth: '',\r\n                location: '',\r\n                introduction: ''\r\n            },\r\n            form:{      //编辑框\r\n                id: '',\r\n                name: '',\r\n                sex: '',\r\n                birth: '',\r\n                location: '',\r\n                introduction: ''\r\n            },\r\n            tableData: [],\r\n            tempData: [],\r\n            select_word: '',\r\n            pageSize: 5,    //分页每页大小\r\n            currentPage: 1,  //当前页\r\n            idx: -1,          //当前选择项\r\n            multipleSelection: []   //哪些项已经打勾\r\n        }\r\n    },\r\n    computed:{\r\n        //计算当前搜索结果表里的数据\r\n        data(){\r\n            return this.tableData.slice((this.currentPage - 1) * this.pageSize,this.currentPage * this.pageSize)\r\n        }\r\n    },\r\n    watch:{\r\n        //搜索框里面的内容发生变化的时候，搜索结果table列表的内容跟着它的内容发生变化\r\n        select_word: function(){\r\n            if(this.select_word == ''){\r\n                this.tableData = this.tempData;\r\n            }else{\r\n                this.tableData = [];\r\n                for(let item of this.tempData){\r\n                    if(item.name.includes(this.select_word)){\r\n                        this.tableData.push(item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.getData();\r\n    },\r\n    methods:{\r\n        //获取当前页\r\n        handleCurrentChange(val){\r\n            this.currentPage = val;\r\n        },\r\n        //查询所有歌手\r\n        getData(){\r\n            this.tempData = [];\r\n            this.tableData = [];\r\n            getAllSinger().then(res => {\r\n                this.tempData = res;\r\n                this.tableData = res;\r\n                this.currentPage = 1;\r\n            })\r\n        },\r\n        //添加歌手\r\n        addSinger(){\r\n            let d = this.registerForm.birth;\r\n            let datetime = d.getFullYear()+'-'+(d.getMonth()+1)+'-'+d.getDate();\r\n            let params = new URLSearchParams();\r\n            params.append('name',this.registerForm.name);\r\n            params.append('sex',this.registerForm.sex);\r\n            params.append('pic','/img/singerPic/hhh.jpg');\r\n            params.append('birth',datetime);\r\n            params.append('location',this.registerForm.location);\r\n            params.append('introduction',this.registerForm.introduction);\r\n\r\n            setSinger(params)\r\n            .then(res => {\r\n                if(res.code == 1){\r\n                    this.getData();\r\n                    this.notify(\"添加成功\",\"success\");\r\n                }else{\r\n                    this.notify(\"添加失败\",\"error\");\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            this.centerDialogVisible = false;\r\n        },\r\n        //弹出编辑页面\r\n        handleEdit(row){\r\n            this.editVisible = true;\r\n            this.form = {\r\n                id: row.id,\r\n                name: row.name,\r\n                sex: row.sex,\r\n                birth: row.birth,\r\n                location: row.location,\r\n                introduction: row.introduction\r\n            }\r\n        },\r\n        //保存编辑页面修改的数据\r\n        editSave(){\r\n            let d = new Date(this.form.birth);\r\n            let datetime = d.getFullYear()+'-'+(d.getMonth()+1)+'-'+d.getDate();\r\n            let params = new URLSearchParams();\r\n            params.append('id',this.form.id);\r\n            params.append('name',this.form.name);\r\n            params.append('sex',this.form.sex);\r\n            params.append('birth',datetime);\r\n            params.append('location',this.form.location);\r\n            params.append('introduction',this.form.introduction);\r\n\r\n            updateSinger(params)\r\n            .then(res => {\r\n                if(res.code == 1){\r\n                    this.getData();\r\n                    this.notify(\"修改成功\",\"success\");\r\n                }else{\r\n                    this.notify(\"修改失败\",\"error\");\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            this.editVisible = false;\r\n        },\r\n        //更新图片\r\n        uploadUrl(id){\r\n            return `${this.$store.state.HOST}/singer/updateSingerPic?id=${id}`\r\n        },\r\n        //删除一名歌手\r\n        deleteRow(){\r\n            delSinger(this.idx)\r\n            .then(res => {\r\n                if(res){\r\n                    this.getData();\r\n                    this.notify(\"删除成功\",\"success\");\r\n                }else{\r\n                    this.notify(\"删除失败\",\"error\");\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            this.delVisible = false;\r\n        },\r\n        //转向歌曲管理页面\r\n        songEdit(id,name){\r\n            this.$router.push({path:`/Song`,query:{id,name}});\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .handle-box{\r\n        margin-bottom: 20px;\r\n    }\r\n    .singer-img{\r\n        width: 100%;\r\n        height: 80px;\r\n        border-radius: 5px;\r\n        margin-bottom: 5px;\r\n        overflow: hidden;\r\n    }\r\n    .handle-input{\r\n        width: 300px;\r\n        display: inline-block;\r\n    }\r\n    .pagination{\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n</style>"]}]}